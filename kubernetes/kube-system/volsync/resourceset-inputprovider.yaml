---
# yaml-language-server: $schema=https://raw.githubusercontent.com/controlplaneio-fluxcd/flux-operator/main/config/crd/bases/fluxcd.controlplane.io_resourcesetinputproviders.yaml
# Consolidated ResourceSetInputProvider for all VolSync backup/restore configurations
# Referenced by volsync-backups and volsync-pvcs ResourceSets in kube-system namespace
# All 21 apps are defined in a single nested array for easier management
# Fields with defaults (can be omitted if value matches):
#   - pvcSuffix: "config" (PVC name will be <app>-<pvcSuffix>)
#   - runAsUser: "1001"
#   - hasBackup: "true"
#   - capacity: "1Gi"
#   - schedule: "0 4 * * *"
# To add a new app: add entry to the apps array below
# To remove an app: delete entry from the apps array below
apiVersion: fluxcd.controlplane.io/v1
kind: ResourceSetInputProvider
metadata:
  name: volsync-apps
  namespace: kube-system
  labels:
    volsync.backube/managed-by: resourceset
spec:
  type: Static
  defaultValues:
    defaults:
      runAsUser: "1001"
      hasBackup: "true"
      capacity: "1Gi"
      schedule: "0 4 * * *"
      pvcSuffix: "config"
    apps:
      # Backups run 4:00-7:00 AM with 9-minute staggered intervals
      - app: audiobookshelf
      
      - app: frigate
        runAsUser: "1000"
        capacity: 10Gi
        schedule: "9 4 * * *"
      
      - app: home-assistant
        runAsUser: "1000"
        capacity: 60Gi
        schedule: "18 4 * * *"
      
      - app: jellyseerr
        schedule: "27 4 * * *"
      
      - app: node-red
        pvcSuffix: "data"
        runAsUser: "1000"
        capacity: 5Gi
        schedule: "36 4 * * *"
      
      - app: plex
        runAsUser: "1000"
        capacity: 55Gi
        schedule: "45 4 * * *"
      
      - app: prowlarr
        capacity: 5Gi
        schedule: "54 4 * * *"
      
      - app: qbittorrent
        schedule: "3 5 * * *"
      
      - app: qui
        schedule: "12 5 * * *"
      
      - app: radarr
        capacity: 3Gi
        schedule: "21 5 * * *"
      
      - app: readarr
        capacity: 6Gi
        schedule: "30 5 * * *"
      
      - app: recyclarr
        capacity: 5Gi
        schedule: "39 5 * * *"
      
      - app: sabnzbd
        schedule: "48 5 * * *"
      
      - app: sonarr
        capacity: 2Gi
        schedule: "57 5 * * *"
      
      - app: tautulli
        schedule: "6 6 * * *"
      
      - app: unifi
        pvcSuffix: "data"
        runAsUser: "999"
        capacity: 20Gi
        schedule: "15 6 * * *"
      
      - app: zwave2mqtt
        schedule: "24 6 * * *"
      
      - app: minecraft-creative
        pvcSuffix: "datadir"
        runAsUser: "1000"
        capacity: 15Gi
        schedule: "33 6 * * *"
      
      - app: minecraft-lobby
        pvcSuffix: "datadir"
        runAsUser: "1000"
        capacity: 5Gi
        schedule: "42 6 * * *"
      
      - app: minecraft-survival
        pvcSuffix: "datadir"
        runAsUser: "1000"
        capacity: 20Gi
        schedule: "51 6 * * *"
      
      - app: minecraft-survival2
        pvcSuffix: "datadir"
        runAsUser: "1000"
        capacity: 30Gi
        schedule: "0 7 * * *"
